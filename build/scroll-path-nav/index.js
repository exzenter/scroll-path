(()=>{"use strict";var e,t={679(){const e=window.wp.blocks,t=window.wp.blockEditor,n=window.wp.components,l=window.wp.data,a=window.wp.element,o=window.ReactJSXRuntime,i=JSON.parse('{"UU":"scrollpath/nav"}');(0,e.registerBlockType)(i.UU,{edit:function({attributes:e,setAttributes:i}){const{includeH1:s,includeH2:r,includeH3:c,includeH4:d,includeH5:h,includeH6:p,customSelectors:u,excludeSelectors:g,viewportTopMargin:x,viewportBottomMargin:m,sectionBasedDetection:b,pathColor:v,pathWidth:C,pathOpacity:j,pathLineStyle:y,childIndent:f,pathCornerRadius:w,fontSize:k,lineHeight:H,useTitleAttribute:S,useCustomLabel:B,editorModeEnabled:O,manualEntries:T}=e,[E,N]=(0,a.useState)(!1),R=(0,t.useBlockProps)({className:"scrollpath-nav-editor"}),P=(0,l.useSelect)(e=>e("core/block-editor").getBlocks(),[]),M=[];s&&M.push("H1"),r&&M.push("H2"),c&&M.push("H3"),d&&M.push("H4"),h&&M.push("H5"),p&&M.push("H6");const _=M.length>0?M.join(", "):"No headings selected",z=(t,n=[])=>(t.forEach(t=>{if("core/heading"===t.name){const l=t.attributes.level||2;if(e[`includeH${l}`]){const e=(t.attributes.content||"").replace(/<[^>]+>/g,"");let a=t.attributes.anchor||e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")||`heading-${n.length}`;n.push({id:a,label:e,enabled:!0,level:l})}}t.innerBlocks&&t.innerBlocks.length>0&&z(t.innerBlocks,n)}),n),L=()=>{const e=z(P);i({manualEntries:e})},W=(e,t)=>{const n=[...T];n[e]={...n[e],...t},i({manualEntries:n})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.InspectorControls,{children:[(0,o.jsxs)(n.PanelBody,{title:"Editor Mode",initialOpen:!0,children:[(0,o.jsx)(n.ToggleControl,{label:"Enable Editor Mode",help:O?"⚠️ Edit mode is active. Changes to page headings will NOT automatically update the navigation. Click 'Recalculate' to refresh.":"When enabled, you can manually edit navigation entries. Automatic detection will be paused.",checked:O,onChange:e=>{e&&N(!0),i({editorModeEnabled:e})}}),O&&(0,o.jsx)(n.Button,{variant:"secondary",onClick:L,style:{marginTop:"8px"},children:"Recalculate from Headings"})]}),(0,o.jsxs)(n.PanelBody,{title:"Heading Levels",initialOpen:!O,children:[(0,o.jsx)("p",{style:{marginBottom:"12px",color:"#757575",fontSize:"12px"},children:"Select which heading levels to include in the scroll path navigation."}),(0,o.jsx)(n.CheckboxControl,{label:"H1",checked:s,onChange:e=>i({includeH1:e})}),(0,o.jsx)(n.CheckboxControl,{label:"H2",checked:r,onChange:e=>i({includeH2:e})}),(0,o.jsx)(n.CheckboxControl,{label:"H3",checked:c,onChange:e=>i({includeH3:e})}),(0,o.jsx)(n.CheckboxControl,{label:"H4",checked:d,onChange:e=>i({includeH4:e})}),(0,o.jsx)(n.CheckboxControl,{label:"H5",checked:h,onChange:e=>i({includeH5:e})}),(0,o.jsx)(n.CheckboxControl,{label:"H6",checked:p,onChange:e=>i({includeH6:e})}),(0,o.jsx)("hr",{style:{margin:"16px 0"}}),(0,o.jsx)(n.CheckboxControl,{label:"Use title attribute as label",help:"When enabled, if a heading has a title attribute, it will be used as the navigation label instead of the full heading text.",checked:S,onChange:e=>i({useTitleAttribute:e})}),(0,o.jsx)(n.CheckboxControl,{label:"Use data-scrollpath-label attribute",help:"When enabled, if a heading has a data-scrollpath-label attribute, it will be used as the navigation label.",checked:B,onChange:e=>i({useCustomLabel:e})})]}),(0,o.jsxs)(n.PanelBody,{title:"Custom Selectors",initialOpen:!1,children:[(0,o.jsx)(n.TextControl,{label:"Include Selectors",help:"CSS selectors to include in the navigation. Separate with commas. Example: .my-section, #intro",value:u,onChange:e=>i({customSelectors:e}),placeholder:".my-class, #my-id"}),(0,o.jsx)(n.TextControl,{label:"Exclude Selectors",help:"CSS selectors to exclude from the navigation. Any heading matching these selectors will be hidden. Example: .no-nav, #skip-this",value:g,onChange:e=>i({excludeSelectors:e}),placeholder:".no-nav, #hidden-section"})]}),(0,o.jsxs)(n.PanelBody,{title:"Path Styling",initialOpen:!0,children:[(0,o.jsx)("p",{style:{marginBottom:"12px",color:"#757575",fontSize:"12px"},children:"Customize the appearance of the scroll indicator path."}),(0,o.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,o.jsx)("p",{style:{marginBottom:"8px",fontWeight:"500"},children:"Path Color"}),(0,o.jsx)(n.ColorPicker,{color:v,onChange:e=>i({pathColor:e}),enableAlpha:!1})]}),(0,o.jsx)(n.RangeControl,{label:"Path Width (px)",value:C,onChange:e=>i({pathWidth:e}),min:1,max:10,step:1}),(0,o.jsx)(n.RangeControl,{label:"Path Opacity (%)",value:j,onChange:e=>i({pathOpacity:e}),min:10,max:100,step:5}),(0,o.jsx)(n.SelectControl,{label:"Line Style",value:y,options:[{label:"Solid",value:"solid"},{label:"Dashed",value:"dashed"},{label:"Dotted",value:"dotted"}],onChange:e=>i({pathLineStyle:e})}),(0,o.jsx)(n.RangeControl,{label:"Child Indent (px)",help:"How far to indent nested heading levels",value:f,onChange:e=>i({childIndent:e}),min:1,max:300,step:1}),(0,o.jsx)(n.RangeControl,{label:"Corner Radius (px)",help:"Round the corners of the path",value:w,onChange:e=>i({pathCornerRadius:e}),min:0,max:50,step:1})]}),(0,o.jsxs)(n.PanelBody,{title:"Typography",initialOpen:!1,children:[(0,o.jsx)(n.RangeControl,{label:"Font Size (px)",value:k,onChange:e=>i({fontSize:e}),min:8,max:32,step:1}),(0,o.jsx)(n.RangeControl,{label:"Line Height",value:H,onChange:e=>i({lineHeight:e}),min:1,max:4,step:.1})]}),(0,o.jsxs)(n.PanelBody,{title:"Viewport Detection",initialOpen:!1,children:[(0,o.jsx)(n.CheckboxControl,{label:"Section-based detection",help:"When enabled, each heading 'owns' all content until the next heading. The indicator spans based on section visibility, not just heading visibility.",checked:b,onChange:e=>i({sectionBasedDetection:e})}),!b&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{style:{marginTop:"16px",marginBottom:"12px",color:"#757575",fontSize:"12px"},children:"Adjust how the scroll spy detects visible headings. Higher values create smaller detection zones."}),(0,o.jsx)(n.RangeControl,{label:"Top Margin (%)",help:"Percentage of viewport to exclude from top",value:x,onChange:e=>i({viewportTopMargin:e}),min:0,max:50,step:5}),(0,o.jsx)(n.RangeControl,{label:"Bottom Margin (%)",help:"Percentage of viewport to exclude from bottom",value:m,onChange:e=>i({viewportBottomMargin:e}),min:0,max:50,step:5})]})]})]}),(0,o.jsxs)("div",{...R,children:[E&&O&&(0,o.jsxs)(n.Notice,{status:"warning",isDismissible:!0,onRemove:()=>N(!1),children:[(0,o.jsx)("strong",{children:"Editor Mode Enabled:"}),' The navigation will NOT automatically update when headings change. Use "Recalculate from Headings" to refresh the list manually.']}),(0,o.jsxs)("div",{className:"scrollpath-nav-editor__placeholder",children:[(0,o.jsx)(n.Icon,{icon:"list-view",size:48}),(0,o.jsx)("h3",{children:"Scroll Path Nav"}),O?(0,o.jsx)("div",{className:"scrollpath-nav-editor__entries",children:0===T.length?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{children:"No entries found. Click the button below to detect headings."}),(0,o.jsx)(n.Button,{variant:"primary",onClick:L,children:"Calculate Navigation"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{style:{marginBottom:"12px",fontSize:"12px",color:"#757575"},children:"Uncheck to hide, edit labels as needed:"}),(0,o.jsx)("div",{className:"scrollpath-nav-editor__entry-list",children:T.map((e,t)=>(0,o.jsxs)("div",{className:"scrollpath-nav-editor__entry",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",paddingLeft:16*(e.level-1)+"px",opacity:e.enabled?1:.5},children:[(0,o.jsx)(n.CheckboxControl,{checked:e.enabled,onChange:e=>W(t,{enabled:e}),__nextHasNoMarginBottom:!0}),(0,o.jsxs)("span",{style:{fontSize:"11px",color:"#757575",minWidth:"24px"},children:["H",e.level]}),(0,o.jsx)(n.TextControl,{value:e.label,onChange:e=>W(t,{label:e}),style:{flex:1,marginBottom:0},__nextHasNoMarginBottom:!0})]},e.id+"-"+t))}),(0,o.jsx)(n.Button,{variant:"secondary",onClick:L,isDestructive:!0,style:{marginTop:"12px"},children:"Recalculate (Overwrites Changes)"})]})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("p",{children:["This block will detect ",(0,o.jsx)("strong",{children:_})," headings on this page and generate an animated scroll navigation."]}),u&&(0,o.jsxs)("p",{className:"scrollpath-nav-editor__hint",children:[(0,o.jsx)("strong",{children:"Custom selectors:"})," ",u]}),(0,o.jsx)("p",{className:"scrollpath-nav-editor__hint",children:"The navigation will appear on the frontend."}),(0,o.jsx)(n.Button,{variant:"primary",onClick:()=>{L(),i({editorModeEnabled:!0}),N(!0)},style:{marginTop:"12px"},children:"Calculate Navigation"})]})]})]})]})},save:function({attributes:e}){const{includeH1:n,includeH2:l,includeH3:a,includeH4:i,includeH5:s,includeH6:r,customSelectors:c,excludeSelectors:d,viewportTopMargin:h,viewportBottomMargin:p,sectionBasedDetection:u,pathColor:g,pathWidth:x,pathOpacity:m,pathLineStyle:b,childIndent:v,pathCornerRadius:C,fontSize:j,lineHeight:y,useTitleAttribute:f,useCustomLabel:w,editorModeEnabled:k,manualEntries:H}=e,S=[];n&&S.push("h1"),l&&S.push("h2"),a&&S.push("h3"),i&&S.push("h4"),s&&S.push("h5"),r&&S.push("h6");const B=k?H.filter(e=>e.enabled):[],O=t.useBlockProps.save({className:"scrollpath-nav","data-heading-levels":S.join(","),"data-custom-selectors":c||"","data-exclude-selectors":d||"","data-viewport-top-margin":null!=h?h:10,"data-viewport-bottom-margin":null!=p?p:10,"data-section-based-detection":u?"true":"false","data-path-color":g||"#91cb3e","data-path-width":null!=x?x:3,"data-path-opacity":null!=m?m:100,"data-path-line-style":b||"solid","data-child-indent":null!=v?v:20,"data-path-corner-radius":null!=C?C:0,"data-font-size":null!=j?j:14,"data-line-height":null!=y?y:2,"data-use-title-attribute":f?"true":"false","data-use-custom-label":w?"true":"false","data-editor-mode":k?"true":"false","data-manual-entries":k?JSON.stringify(B):""});return(0,o.jsx)("nav",{...O,"aria-label":"Page sections"})}})}},n={};function l(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,l),o.exports}l.m=t,e=[],l.O=(t,n,a,o)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,a,o]=e[d],s=!0,r=0;r<n.length;r++)(!1&o||i>=o)&&Object.keys(l.O).every(e=>l.O[e](n[r]))?n.splice(r--,1):(s=!1,o<i&&(i=o));if(s){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,a,o]},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={245:0,929:0};l.O.j=t=>0===e[t];var t=(t,n)=>{var a,o,[i,s,r]=n,c=0;if(i.some(t=>0!==e[t])){for(a in s)l.o(s,a)&&(l.m[a]=s[a]);if(r)var d=r(l)}for(t&&t(n);c<i.length;c++)o=i[c],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(d)},n=globalThis.webpackChunkscrollpath=globalThis.webpackChunkscrollpath||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=l.O(void 0,[929],()=>l(679));a=l.O(a)})();