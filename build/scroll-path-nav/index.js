(()=>{"use strict";var e,t={679(){const e=window.wp.blocks,t=window.wp.blockEditor,n=window.wp.components,a=window.wp.data,l=window.wp.element,i=window.ReactJSXRuntime,o=JSON.parse('{"UU":"scrollpath/nav"}');(0,e.registerBlockType)(o.UU,{edit:function({attributes:e,setAttributes:o}){const{includeH1:s,includeH2:r,includeH3:c,includeH4:d,includeH5:h,includeH6:p,customSelectors:u,viewportTopMargin:g,viewportBottomMargin:x,sectionBasedDetection:m,pathColor:b,pathWidth:v,pathOpacity:C,pathLineStyle:j,childIndent:y,pathCornerRadius:f,fontSize:w,lineHeight:k,useTitleAttribute:H,useCustomLabel:B,editorModeEnabled:S,manualEntries:O}=e,[T,N]=(0,l.useState)(!1),R=(0,t.useBlockProps)({className:"scrollpath-nav-editor"}),E=(0,a.useSelect)(e=>e("core/block-editor").getBlocks(),[]),P=[];s&&P.push("H1"),r&&P.push("H2"),c&&P.push("H3"),d&&P.push("H4"),h&&P.push("H5"),p&&P.push("H6");const M=P.length>0?P.join(", "):"No headings selected",_=(t,n=[])=>(t.forEach(t=>{if("core/heading"===t.name){const a=t.attributes.level||2;if(e[`includeH${a}`]){const e=(t.attributes.content||"").replace(/<[^>]+>/g,"");let l=t.attributes.anchor||e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")||`heading-${n.length}`;n.push({id:l,label:e,enabled:!0,level:a})}}t.innerBlocks&&t.innerBlocks.length>0&&_(t.innerBlocks,n)}),n),z=()=>{const e=_(E);o({manualEntries:e})},L=(e,t)=>{const n=[...O];n[e]={...n[e],...t},o({manualEntries:n})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.InspectorControls,{children:[(0,i.jsxs)(n.PanelBody,{title:"Editor Mode",initialOpen:!0,children:[(0,i.jsx)(n.ToggleControl,{label:"Enable Editor Mode",help:S?"⚠️ Edit mode is active. Changes to page headings will NOT automatically update the navigation. Click 'Recalculate' to refresh.":"When enabled, you can manually edit navigation entries. Automatic detection will be paused.",checked:S,onChange:e=>{e&&N(!0),o({editorModeEnabled:e})}}),S&&(0,i.jsx)(n.Button,{variant:"secondary",onClick:z,style:{marginTop:"8px"},children:"Recalculate from Headings"})]}),(0,i.jsxs)(n.PanelBody,{title:"Heading Levels",initialOpen:!S,children:[(0,i.jsx)("p",{style:{marginBottom:"12px",color:"#757575",fontSize:"12px"},children:"Select which heading levels to include in the scroll path navigation."}),(0,i.jsx)(n.CheckboxControl,{label:"H1",checked:s,onChange:e=>o({includeH1:e})}),(0,i.jsx)(n.CheckboxControl,{label:"H2",checked:r,onChange:e=>o({includeH2:e})}),(0,i.jsx)(n.CheckboxControl,{label:"H3",checked:c,onChange:e=>o({includeH3:e})}),(0,i.jsx)(n.CheckboxControl,{label:"H4",checked:d,onChange:e=>o({includeH4:e})}),(0,i.jsx)(n.CheckboxControl,{label:"H5",checked:h,onChange:e=>o({includeH5:e})}),(0,i.jsx)(n.CheckboxControl,{label:"H6",checked:p,onChange:e=>o({includeH6:e})}),(0,i.jsx)("hr",{style:{margin:"16px 0"}}),(0,i.jsx)(n.CheckboxControl,{label:"Use title attribute as label",help:"When enabled, if a heading has a title attribute, it will be used as the navigation label instead of the full heading text.",checked:H,onChange:e=>o({useTitleAttribute:e})}),(0,i.jsx)(n.CheckboxControl,{label:"Use data-scrollpath-label attribute",help:"When enabled, if a heading has a data-scrollpath-label attribute, it will be used as the navigation label.",checked:B,onChange:e=>o({useCustomLabel:e})})]}),(0,i.jsx)(n.PanelBody,{title:"Custom Selectors",initialOpen:!1,children:(0,i.jsx)(n.TextControl,{label:"Additional Selectors",help:"Enter CSS selectors (class names or IDs) to include in the navigation. Separate multiple selectors with commas. Example: .my-section, #intro, .custom-heading",value:u,onChange:e=>o({customSelectors:e}),placeholder:".my-class, #my-id"})}),(0,i.jsxs)(n.PanelBody,{title:"Path Styling",initialOpen:!0,children:[(0,i.jsx)("p",{style:{marginBottom:"12px",color:"#757575",fontSize:"12px"},children:"Customize the appearance of the scroll indicator path."}),(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsx)("p",{style:{marginBottom:"8px",fontWeight:"500"},children:"Path Color"}),(0,i.jsx)(n.ColorPicker,{color:b,onChange:e=>o({pathColor:e}),enableAlpha:!1})]}),(0,i.jsx)(n.RangeControl,{label:"Path Width (px)",value:v,onChange:e=>o({pathWidth:e}),min:1,max:10,step:1}),(0,i.jsx)(n.RangeControl,{label:"Path Opacity (%)",value:C,onChange:e=>o({pathOpacity:e}),min:10,max:100,step:5}),(0,i.jsx)(n.SelectControl,{label:"Line Style",value:j,options:[{label:"Solid",value:"solid"},{label:"Dashed",value:"dashed"},{label:"Dotted",value:"dotted"}],onChange:e=>o({pathLineStyle:e})}),(0,i.jsx)(n.RangeControl,{label:"Child Indent (px)",help:"How far to indent nested heading levels",value:y,onChange:e=>o({childIndent:e}),min:1,max:300,step:1}),(0,i.jsx)(n.RangeControl,{label:"Corner Radius (px)",help:"Round the corners of the path",value:f,onChange:e=>o({pathCornerRadius:e}),min:0,max:50,step:1})]}),(0,i.jsxs)(n.PanelBody,{title:"Typography",initialOpen:!1,children:[(0,i.jsx)(n.RangeControl,{label:"Font Size (px)",value:w,onChange:e=>o({fontSize:e}),min:8,max:32,step:1}),(0,i.jsx)(n.RangeControl,{label:"Line Height",value:k,onChange:e=>o({lineHeight:e}),min:1,max:4,step:.1})]}),(0,i.jsxs)(n.PanelBody,{title:"Viewport Detection",initialOpen:!1,children:[(0,i.jsx)(n.CheckboxControl,{label:"Section-based detection",help:"When enabled, each heading 'owns' all content until the next heading. The indicator spans based on section visibility, not just heading visibility.",checked:m,onChange:e=>o({sectionBasedDetection:e})}),!m&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{style:{marginTop:"16px",marginBottom:"12px",color:"#757575",fontSize:"12px"},children:"Adjust how the scroll spy detects visible headings. Higher values create smaller detection zones."}),(0,i.jsx)(n.RangeControl,{label:"Top Margin (%)",help:"Percentage of viewport to exclude from top",value:g,onChange:e=>o({viewportTopMargin:e}),min:0,max:50,step:5}),(0,i.jsx)(n.RangeControl,{label:"Bottom Margin (%)",help:"Percentage of viewport to exclude from bottom",value:x,onChange:e=>o({viewportBottomMargin:e}),min:0,max:50,step:5})]})]})]}),(0,i.jsxs)("div",{...R,children:[T&&S&&(0,i.jsxs)(n.Notice,{status:"warning",isDismissible:!0,onRemove:()=>N(!1),children:[(0,i.jsx)("strong",{children:"Editor Mode Enabled:"}),' The navigation will NOT automatically update when headings change. Use "Recalculate from Headings" to refresh the list manually.']}),(0,i.jsxs)("div",{className:"scrollpath-nav-editor__placeholder",children:[(0,i.jsx)(n.Icon,{icon:"list-view",size:48}),(0,i.jsx)("h3",{children:"Scroll Path Nav"}),S?(0,i.jsx)("div",{className:"scrollpath-nav-editor__entries",children:0===O.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:"No entries found. Click the button below to detect headings."}),(0,i.jsx)(n.Button,{variant:"primary",onClick:z,children:"Calculate Navigation"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{style:{marginBottom:"12px",fontSize:"12px",color:"#757575"},children:"Uncheck to hide, edit labels as needed:"}),(0,i.jsx)("div",{className:"scrollpath-nav-editor__entry-list",children:O.map((e,t)=>(0,i.jsxs)("div",{className:"scrollpath-nav-editor__entry",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",paddingLeft:16*(e.level-1)+"px",opacity:e.enabled?1:.5},children:[(0,i.jsx)(n.CheckboxControl,{checked:e.enabled,onChange:e=>L(t,{enabled:e}),__nextHasNoMarginBottom:!0}),(0,i.jsxs)("span",{style:{fontSize:"11px",color:"#757575",minWidth:"24px"},children:["H",e.level]}),(0,i.jsx)(n.TextControl,{value:e.label,onChange:e=>L(t,{label:e}),style:{flex:1,marginBottom:0},__nextHasNoMarginBottom:!0})]},e.id+"-"+t))}),(0,i.jsx)(n.Button,{variant:"secondary",onClick:z,isDestructive:!0,style:{marginTop:"12px"},children:"Recalculate (Overwrites Changes)"})]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{children:["This block will detect ",(0,i.jsx)("strong",{children:M})," headings on this page and generate an animated scroll navigation."]}),u&&(0,i.jsxs)("p",{className:"scrollpath-nav-editor__hint",children:[(0,i.jsx)("strong",{children:"Custom selectors:"})," ",u]}),(0,i.jsx)("p",{className:"scrollpath-nav-editor__hint",children:"The navigation will appear on the frontend."}),(0,i.jsx)(n.Button,{variant:"primary",onClick:()=>{z(),o({editorModeEnabled:!0}),N(!0)},style:{marginTop:"12px"},children:"Calculate Navigation"})]})]})]})]})},save:function({attributes:e}){const{includeH1:n,includeH2:a,includeH3:l,includeH4:o,includeH5:s,includeH6:r,customSelectors:c,viewportTopMargin:d,viewportBottomMargin:h,sectionBasedDetection:p,pathColor:u,pathWidth:g,pathOpacity:x,pathLineStyle:m,childIndent:b,pathCornerRadius:v,fontSize:C,lineHeight:j,useTitleAttribute:y,useCustomLabel:f,editorModeEnabled:w,manualEntries:k}=e,H=[];n&&H.push("h1"),a&&H.push("h2"),l&&H.push("h3"),o&&H.push("h4"),s&&H.push("h5"),r&&H.push("h6");const B=w?k.filter(e=>e.enabled):[],S=t.useBlockProps.save({className:"scrollpath-nav","data-heading-levels":H.join(","),"data-custom-selectors":c||"","data-viewport-top-margin":null!=d?d:10,"data-viewport-bottom-margin":null!=h?h:10,"data-section-based-detection":p?"true":"false","data-path-color":u||"#91cb3e","data-path-width":null!=g?g:3,"data-path-opacity":null!=x?x:100,"data-path-line-style":m||"solid","data-child-indent":null!=b?b:20,"data-path-corner-radius":null!=v?v:0,"data-font-size":null!=C?C:14,"data-line-height":null!=j?j:2,"data-use-title-attribute":y?"true":"false","data-use-custom-label":f?"true":"false","data-editor-mode":w?"true":"false","data-manual-entries":w?JSON.stringify(B):""});return(0,i.jsx)("nav",{...S,"aria-label":"Page sections"})}})}},n={};function a(e){var l=n[e];if(void 0!==l)return l.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,a),i.exports}a.m=t,e=[],a.O=(t,n,l,i)=>{if(!n){var o=1/0;for(d=0;d<e.length;d++){for(var[n,l,i]=e[d],s=!0,r=0;r<n.length;r++)(!1&i||o>=i)&&Object.keys(a.O).every(e=>a.O[e](n[r]))?n.splice(r--,1):(s=!1,i<o&&(o=i));if(s){e.splice(d--,1);var c=l();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,l,i]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={245:0,929:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var l,i,[o,s,r]=n,c=0;if(o.some(t=>0!==e[t])){for(l in s)a.o(s,l)&&(a.m[l]=s[l]);if(r)var d=r(a)}for(t&&t(n);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},n=globalThis.webpackChunkscrollpath=globalThis.webpackChunkscrollpath||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l=a.O(void 0,[929],()=>a(679));l=a.O(l)})();